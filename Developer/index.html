
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">

<head>

<title>Developer Information - HTML_CodeSniffer</title>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<link href="../css/inside.css" rel="stylesheet" type="text/css">
<link href="../css/inside-print.css" rel="stylesheet" type="text/css" media="print">
<link rel="Shortcut Icon" href="../images/favicon.png">
<script type="text/javascript" src="../inside.js"></script>

<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-359178-16']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>

</head>

<body>

    <div id="back-to-top" class="off">
        <span><a href="#">top</a></span>
    </div>

    <div id="header">

        <div class="max-width">

            <h1><a href="http://squizlabs.github.io/HTML_CodeSniffer"><span class="screen-hide">HTML_CodeSniffer</span></a></h1>

            <map name="External Links">

            <ul id="sprites">
                <li><a href="http://squiz.com.au" class="header-sprite squiz-logo"><span class="screen-hide">Squiz</span></a></li>
                <li><a href="https://github.com/squizlabs/HTML_CodeSniffer" class="header-sprite github-logo"><span class="screen-hide">HTML_CodeSniffer on GitHub</span></a></li>
                <li><a href="http://twitter.com/htmlcs" class="header-sprite twitter-logo"><span class="screen-hide">Follow us on Twitter</span></a></li>
            </ul>

            </map>

        </div>

    </div>

    <div id="introduction" style="min-height: 0px">

        <ul id="nav">
            <li><a href="../index.html"><img src="../images/home.png" alt=""> Home</a></li>
            <li><a href="../Docs">Standards</a></li>
            <li><a href="../Developer">Developer</a></li>
        </ul>

        <div class="max-width">

            <h2>Developer Information</h2>

            <p>The HTML_CodeSniffer project welcomes contributions from those .</p>

        </div>

        <div class="zigzag">

        </div>

    </div> <!-- end introduction -->

    <div id="test-area">

        <div class="max-width">
        
        <div id="side-nav">
            <ul>
                <li><strong>Developer</strong></li>
                <ul>
                    <li><a href="Concepts">Standard Concepts</a></li>
                    <li><a href="Compiling">Building <abbr title="HTML_CodeSniffer">HTMLCS</abbr></a></li>
                    <li><a href="CLI">Command Line</a></li>
                    <li><a href="Contributing">Contributing</a></li>
                    <ul>
                       <li><a href="Contributing#reporting_issues">Reporting Issues</a></li>
                       <li><a href="Contributing#code_contribution">Contributing Code</a></li>
                    </ul>
                    <li><a href="Credits">Credits</a></li>
                </ul>
            </ul>
        </div>
        
        <div id="main-area">
        
        <h3>Concepts</h3>
        
        <h4>Standard</h4>
        
        <p>A <strong>standard</strong> is a folder containing the definition of a standard for HTML_CodeSniffer
        to use when checking a document. It is defined by its <strong>ruleset file</strong> and its
        <strong>sniff</strong> files, and must contain one - usually both.</li>
        
        <p>The official distribution of HTML_CodeSniffer comes with two groups of accessibility standard checks:</p>
        <ul>
            <li><strong>WCAG2A</strong>, <strong>WCAG2AA</strong>, <strong>WCAG2AAA</strong>: The three levels of the
            <abbr title="World Wide Web Consortium">W3C</abbr>'s Web Content Accessibility Guidelines (WCAG) 2.0 Recommendation.</li>
            <li><strong>Section508</strong>: The original version of the U.S. "Section 508" accessibility standards.</li>
        </ul>
        
        <h4>Sniff</h4>
        <p>The basic unit of testing is called a <strong>sniff</strong>. These files sit in the Sniffs directory of a standard,
        but are not necessarily used unless called by a standard's ruleset file.</p>
        
        <h4>Ruleset File</h4>
        <p>Each standard that wishes to make itself available for checking shall provide a ruleset file that declares the
        sniffs that it will use. This file sits at the top of the standard's directory, and is named
        <strong>ruleset.js</strong>.</p>
        
        <p>The ruleset file should define a bare object at the global level called <strong>HTMLCS_[StandardName]</strong>.
        For instance, the WCAG2AAA standard defines an object called <strong>HTMLCS_WCAG2AAA</strong>.</p>
        
        <h5>Ruleset File Definition</h5>
        
        <p>This object should contain the following properties:</p>
        
        <ul>
            <li><strong>name</strong> (required String): currently repeats the name of the standard (eg. "WCAG2AAA").
            <li><strong>description</strong> (required String): a short description of what the standard is or does.
            <li><strong>sniffs</strong> (required Array of String or Object): determines which sniff files the standard will use.
                <ul>
                    <li>If an array entry is a String, it will define a single sniff file to be used - this is the relative
                    location from the Sniffs directory, with folders replaced by dots (eg. "Foo.Bar.1_1" points to
                    the file <code>Sniffs/Foo/Bar/1.1.js</code>.)</li>
                    <li>If an array entry is an Object, it is a pointer to another standard. It contains the following properties:</li>
                    <ul>
                        <li><strong>standard</strong> (required String): The standard to import from.
                        <li><strong>include</strong> (optional Array of String): If provided, import ONLY these sniffs from the standard.
                        <li><strong>exclude</strong> (optional Array of String): If provided, import all sniffs from the standard EXCEPT these ones.
                        <li>If neither <strong>include</strong> or <strong>exclude</strong> is provided, all sniffs will be included.</li>
                        <li>Sniffs to be included or excluded should be specified the same way as a same-standard sniff.</li>
                    </ul>
                </ul>
            <li><strong>getMsgInfo</strong> (optional Function): When passed a message code, it can provide further information
                to the user based upon it. For instance, with WCAG2, it will return links to the relevant section of
                the WCAG2 Recommendation and suggested techinques.<br/>
                This accepts a full message code (see on), and should return an Array of Array[title, description].</li>
        </ul>
        
        <p>A standard can omit a ruleset file, if it wants to simply provide common sniffs to other standards.</p>
        
        <h4>Anatomy of a Sniff File</h4>
        
        <p>A sniff file lives in the Sniffs folder of a standard, with the directory structure suited to what is useful.
        For instance, the WCAG2 files are grouped by the Recommendation's grouping of Principle and Guideline, with the
        sniff file representing the Success Criterion level.</p>
        
        <p>Each sniff file is currently defined as a global "var" variable with a name reflecting its folder structure,
        with folders replaced with underscores. For instance, <strong>HTMLCS_StandardName_Sniffs_Foo_Bar_1_1</strong>.</p>
        
        <p>This object must contain the following properties:</p>
        
        <ul>
            <li><strong>register</strong> (required Function): Takes no parameters, returns an Array of (String) tag names
            that should be tested in the document or fragment. The shortcut "_top" can also be provided to represent the
            root element whatever that may be.</li>
            <li><strong>process</strong> (required Function): Passed the element (DOMNode) being processed first,
            then the "top" element (also DOMNode). Only receives elements that were registered by the <strong>register</strong>
            function.</li>
        </ul>
        
        <p>The process function should be considered the driver, and you should add further functions to the object
        as required, and call them from process.</p>
        
        <h4>Returning messages</h4>
        
        <p>If there are no problems, then no news is good news: don't return anything.</p>
        
        <p>If your code detects a violation or suggests a potential violation, then it should add a message to the list of
        current issues using <strong>HTMLCS.addMessage</strong>. It has the following signature (all arguments required):</p>
        
        <pre>HTMLCS.addMessage(level, element, message, code);</pre>
        
        <ul>
            <li><strong>level</strong> (Number): The severity level, out of these three constant levels:
            <ul>
                <li><strong>HTMLCS.ERROR</strong>: Use where it is certain a violation </li>
                <li><strong>HTMLCS.WARNING</strong>: Use for issues that have been detected by HTML_CodeSniffer, but recommend a manual review before being passed or failed.</li>
                <li><strong>HTMLCS.NOTICE</strong>: Use for potential problems that cannot be checked, or general messages that should be manually checked by all users.</li>
            </ul>
            <li><strong>element</strong> (DOMNode): The violating element.</li>
            <li><strong>message</strong> (String): The full message to display to the user.</li>
            <li><strong>code</strong> (String): A unique invariant string for that message.</li>
        </ul>
        
        <p>The <strong>code</strong> of a message will be expanded internally to include the path of the Sniff it was
        called in. So a code of "NoAltText" may be expanded into "StandardName.Foo.Bar.1_1.NoAltText". This expanded
        code is also passed to the ruleset function getMsgInfo.</p>
        
        <h3>Building HTML_CodeSniffer</h3>
        
        <p>You can use node.js and the <a href="http://gruntjs.com">Grunt</a> task runner to build a
        developer version of the auditor to test contributed code.</p>

        <p><strong>Note:</strong> If you have node.js and/or Grunt you can ignore the steps 1 and 2 as appropriate.</p>

        <ol>
            <li>Install <a href="http://nodejs.org">node.js</a>, probably through your system's package manager of choice</li>
            <ul>
                <li>You may need to update the node.js package manager itself (<code>sudo npm update -g npm</code>)</li>
            </ul>
            <li>Install Grunt using their <a href="http://gruntjs.com/getting-started">Getting Started</a> guide.</li>
            <li><code>cd $YOUR_HTMLCS_DIR</code> (replace $YOUR_HTMLCS_DIR with your local HTML_CodeSniffer source path).</li>
            <li><code>git pull</code> if you need to</li>
            <li><code>npm install</code> to install the Grunt tasks' dependencies locally</li>  
            <li><code>grunt --gruntfile Contrib/Grunt/gruntfile.coffee build</code> to build it.</li>
            <ul>
                <li>* You should get an <a href="http://lisperator.net/uglifyjs/">uglify</a> and copy task come up.</li>
            </ul>
        </ol>

        <p>If all is well, you should get a build directory with a HTMLCS.js,
        HTMLCS.css, an Images directory and the licence file.
        You can copy this into somewhere accessible through a browser.</p>

        <p>Then grab or copy the auditor bookmarklet off the <a href="../">front page</a>, and
        replace the directory at the start (<code>//squizlabs.github.io/HTML_CodeSniffer/build</code>) with your local URL.</p>
        
        <h3>Command-Line</h3>
        
        <p>HTML_CodeSniffer can be run on the command line using <a href="http://phantomjs.org">PhantomJS</a>.</p>
        
        <h3>Contributing</h3>
        
        <h4 id="reporting_issues">Reporting Issues</h4>
        
        <p>To report any issues with using HTML_CodeSniffer, please use our <a href="">issue tracker</a> located in our GitHub repository.</p>

        <p>Contributions to the HTML_CodeSniffer code base are also welcome: please create a fork of the main repository, then submit your modified code through a Pull Request for review. A Pull Request also automatically creates an issue in the Issue Tracker, so if you have code to contribute, you do not need to do both.</p>
        
        <h4 id="code_contribution">Contributing Code</h4>
        
        <p>The HTML_CodeSniffer code base is provided under a
        <a href="https://raw.githubusercontent.com/squizlabs/HTML_CodeSniffer/master/licence.txt" title="HTML_CodeSniffer licence file">BSD-style permissive licence</a>, so
        if you find an issue you can fix, by all means give the code a fork and send back a Pull
        Request through Github.</p>
        
        <h4 id="credits">Credits</h4>
        
        <ul>
        <li><strong>Squiz Labs team</strong></li>
            <ul>
                <li>Luke Wright (Lead developer)</li>
                <li>Danny Peters (Accessibility Auditor design)</li>
                <li>Sertan Danis</li>
                <li>Greg Sherwood</li>
                <li>Scott Kim</li>
            </ul>
        <li><strong>Contributors</strong></li>
            <ul>
                <li>"Jellyfrog"</li>
                <li>Michael Fairchild</li>
                <li>Patrick McElhaney</li>
                <li>Steven Miller</li>
            </ul>
        </ul>
        
        </div>
        
        </div> <!-- end max-width -->

        <div class="zigzag zigzag-grey"></div>

    </div> <!-- end test-area -->

    <div id="footer">
        <div class="max-width">
            <p><strong>HTML_CodeSniffer</strong> developed by <strong><a href="http://www.squiz.com.au">Squiz</a></strong> Content Management Solutions</p>
        </div>
    </div>

</body>
</html>
